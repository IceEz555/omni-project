# Omni Serial Bridge: Developer Guide & Workflow

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏° **‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà Developer ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ** ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö `serial-bridge`

---

## 1. ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡∏° Backend ‡∏ó‡∏≥‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (Latest Updates)

‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î `serial-bridge` ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö **Dynamic & Universal**:

### ‚úÖ 1.1 ‡∏£‡∏∞‡∏ö‡∏ö Auto-Discovery

- ‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤ Arduino ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (`SerialPort.list()`) ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ `COM3` ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
- Plug & Play: ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏õ‡∏∏‡πä‡∏ö ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏±‡πä‡∏ö ‡∏™‡∏≤‡∏¢‡∏´‡∏•‡∏∏‡∏î‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏≠‡∏á

### ‚úÖ 1.2 ‡∏£‡∏∞‡∏ö‡∏ö Dynamic Matrix Parsing

- **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î:** ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô 16x16, 32x32 ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ
- **‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£:** ‡πÉ‡∏ä‡πâ Keyword `TABLE` ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏ö‡πà‡∏á Frame ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Hardcode ‡∏Ç‡∏ô‡∏≤‡∏î array ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î (‡∏ï‡∏±‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `MATRIX_COLS` ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß)

---

## 2. ‡πÑ‡∏°‡πà‡∏°‡∏µ Hardware? ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πà‡∏ß‡∏á! (Mock Device Simulator) üõ†Ô∏è

‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå Arduino ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏î‡∏™‡∏≠‡∏ö Flow ‡∏£‡∏∞‡∏ö‡∏ö (Backend -> Frontend) ‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß:

### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:

1.  ‡πÄ‡∏õ‡∏¥‡∏î Terminal ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà `omni-back-end/serial-bridge`
2.  ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:
    ```bash
    node mock_device.js
    ```
3.  **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
    - ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• **Pressure Mat 16x16** (‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏ß‡∏¥‡πà‡∏á‡∏ß‡∏ô‡πÑ‡∏õ‡∏°‡∏≤) ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Live Monitor
    - ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ **Distance & Temp Sensor** ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
    - ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö `http://localhost:5173` ‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á!

---

## 3. Workflow ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà (Step-by-Step)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏´‡∏°‡πà (‡∏™‡∏°‡∏°‡∏ï‡∏¥: "Smart Chair"):

### Step 1: ‡∏ù‡∏±‡πà‡∏á Hardware

‡∏ù‡∏±‡∏á ID 2 ‡∏ï‡∏±‡∏ß‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î Arduino:

1.  **Profile ID:** ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô `smart_chair_v1`
2.  **Hardware ID:** ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô `CHAIR_001`
    (‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ)

### Step 2: ‡∏ù‡∏±‡πà‡∏á Admin (Web UI Config)

1.  **Create Profile:** ‡πÉ‡∏™‡πà Profile ID `smart_chair_v1`
2.  **Add Device:** ‡πÉ‡∏™‡πà Hardware ID `CHAIR_001` ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Profile ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á

### Step 3: ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

‡πÄ‡∏™‡∏µ‡∏¢‡∏ö Arduino -> Bridge ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ -> Backend ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å -> Frontend ‡πÇ‡∏ä‡∏ß‡πå‡∏Å‡∏£‡∏≤‡∏ü

---

## 4. ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î Arduino (.ino)

```cpp
// --- CONFIGURATION ---
String PROFILE_ID  = "smart_chair_v1";
String HARDWARE_ID = "CHAIR_001";
// ---------------------

void loop() {
  int pressure = analogRead(A0);
  String jsonData = "{\"val\": " + String(pressure) + "}";

  // Format: HARDWARE_ID | PROFILE_ID | JSON
  Serial.print(HARDWARE_ID); Serial.print("|");
  Serial.print(PROFILE_ID); Serial.print("|");
  Serial.println(jsonData);

  delay(100);
}
```

---

## 5. UI Mapping Reference

| UI Field        | Backend Logic              | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢                                      |
| :-------------- | :------------------------- | :-------------------------------------------- |
| **Profile ID**  | `DeviceProfile.profile_id` | **"‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤"** (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Code Arduino) |
| **Hardware ID** | `Device.serial_number`     | **"‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô"** (‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)            |
